// Module included in the following assembly:
//
// * release_notes/gitops-release-notes.adoc

:_mod-docs-content-type: REFERENCE

[id="gitops-release-notes-1-13-2_{context}"]
= Release notes for {gitops-title} 1.13.2

{gitops-title} 1.13.2 is now available on {OCP} 4.12, 4.13, 4.14, 4.15, and 4.16.

[id="errata-updates-1-13.2_{context}"]
== Errata updates

[id="rhsa-2024:8581-gitops-1-13-2-security-update-advisory_{context}"]
=== RHSA-2024:8581 - {gitops-title} 1.13.2 security update advisory

Issued: 2024-10-29

The list of security fixes that are included in this release is documented in the following advisory:

* link:https://access.redhat.com/errata/RHSA-2024:8581[RHSA-2024:8581]

If you have installed the {gitops-title} Operator in the default namespace, run the following command to view the container images in this release:

[source,terminal]
----
$ oc describe deployment gitops-operator-controller-manager -n openshift-gitops-operator
----

[id="fixed-issues-1-13-2_{context}"]
== Fixed issues

* Before this update, Argo CD could not obtain the appropriate transport layer security (TLS) certificate for Helm Open Container Initiative (OCI) registries when the URL included a path or port number. With this update, a fix is introduced in upstream Argo CD to correctly parse the URL and return a valid certificate. link:https://issues.redhat.com/browse/GITOPS-5081[GITOPS-5081]

* Before this update, you could not log in to the Argo CD web console UI after a Red Hat OpenShift Service on an Amazon Web Services (AWS) cluster, that includes a {gitops-shortname} Operator and an Argo CD instance configured with Dex-based SSO, resumed from hibernation. The login screen would display an error indicating an invalid redirect Uniform Resource Identifier (URI) in the Dex configuration. This update fixes the issue by ensuring that the correct Dex redirect URL is updated in the Argo CD configuration whenever a Argo CD server route is modified. link:https://issues.redhat.com/browse/GITOPS-4358[GITOPS-4358]

[id="breaking-change-1-13-2_{context}"]
== Breaking change

[id="additional-configurations-for-cluster-scoped-rollouts-instance-installation_{context}"]
=== Additional configurations for cluster-scoped rollouts instance installation

* When you upgrade to {gitops-title} v1.13, if you want to create the cluster-scoped rollouts installation outside the default installation namespace, `openshift-gitops`, you must host it in the `CLUSTER_SCOPED_ARGO_ROLLOUTS_NAMESPACES` environment variable of the `Subscription` resource. The {gitops-title} Operator does not support cluster-scoped rollouts installation if the namespace is not defined in the `CLUSTER_SCOPED_ARGO_ROLLOUTS_NAMESPACES` environment variable.
+
In previous versions of {gitops-title}, Argo Rollouts used the `NAMESPACE_SCOPED_ARGO_ROLLOUTS_NAMESPACES` environment variable of the `Subscription` resource to check if the cluster-scoped rollouts instance can host a cluster-scoped rollouts installation in the user-defined namespace. link:https://issues.redhat.com/browse/GITOPS-5640[GITOPS-5640]
+
[NOTE]
====
The cluster-scoped rollouts installation functionality change does not impact the installation behavior of the namespace-scoped rollouts installation.
====
+
.Example: Configuring the `CLUSTER_SCOPED_ARGO_ROLLOUTS_NAMESPACES` environment variable
[source,yaml]
----
apiVersion: operators.coreos.com/v1alpha1
kind: Subscription
metadata:
  name: argo-operator
spec:
  config:
   env: 
    - name: NAMESPACE_SCOPED_ARGO_ROLLOUTS
      value: 'false' #<1>
    - name: CLUSTER_SCOPED_ARGO_ROLLOUTS_NAMESPACES
      value: <list_of_namespaces_in_the_cluster-scoped_Argo_CD_instances> #<2>
 ...
----
<1> Specify this value to enable or disable the cluster-scoped installation. If the value is set to `'false'`, it means that the you have enabled cluster-scoped installation. If it is set to `'true'`, it means that you have enabled namespace-scoped installation. If the value is empty, it is set to `false`.
<2> Specifies a comma-separated list of namespaces that can host a cluster-scoped Argo CD instance, for example `test-123-cluster-scoped,test-456-cluster-scoped`.